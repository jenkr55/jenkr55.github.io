<head>
<link rel="stylesheet" type="text/css" href="application.css">
<title>ZenWriter - Jennifer Kruse</title>
</head>

<body onload="initialBG()" class="bg">

<div class="header">ZenWriter</div>
<div class="box">
<textarea class="FormElement" cols="100" id="wordBox"  rows="30" onKeyPress='changeBG(this.value);' onfocus='eraseText(this);'>Click here to begin typing. Every 50 words, a new background will appear.</textarea>
  </div>
</body>

<script>
function countWords(){
	s = document.getElementById("wordBox").value;
	s = s.replace(/(^\s*)|(\s*$)/gi,"");
	s = s.replace(/[ ]{2,}/gi," ");
	s = s.replace(/\n /,"\n");
        return s.split(' ').length;
}

function changeBG() {
text = document.getElementById("wordBox").value;
char = text.slice(-1);
if( countWords() % 50 == 0 && char == " "){
  var randomnumber=Math.floor(Math.random()*102)
  var filename = "http://www.jenniferkruse.me/ZenWriter/images/file-" + randomnumber+".jpg";
  document.body.background = filename
}
}

function initialBG(){
var randomnumber = Math.floor(Math.random()*105)
var filename = "http://www.jenniferkruse.me/ZenWriter/images/file-" + randomnumber+".jpg";
  document.body.background = filename
}

function eraseText(element){
if (element.value == "Click here to begin typing. Every 50 words, a new background will appear."){
element.value = "";
}
}

</script>
